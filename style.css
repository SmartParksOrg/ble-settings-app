:root {
    color-scheme: light;
    --sp-forest: #52735E;
    --sp-forest-dark: #3f5c4a;
    --sp-sage: #90AE9B;
    --sp-mist: #a0bfc3;
    --sp-cream: #f5f7f3;
    --sp-ink: #1f2a23;
    --sp-border: rgba(82, 115, 94, 0.25);
    --sp-shadow: 0 10px 24px rgba(28, 42, 33, 0.14), 0 2px 6px rgba(28, 42, 33, 0.08);
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 8px;
    --radius-pill: 10px;
    --body-bottom-padding: 64px;
}

body,
html {
    margin: 0;
    padding: 0;
}

body {
    font-family: "Avenir Next", "Segoe UI Variable", "Futura", "Trebuchet MS", "Noto Sans", sans-serif;
    width: 100%;
    min-height: 100vh;
    color: var(--sp-ink);
    background:
        radial-gradient(1200px 520px at 10% -10%, rgba(160, 191, 195, 0.45), transparent 60%),
        linear-gradient(160deg, #eef3ef 0%, #dfe9e2 45%, #c6d6cc 100%);
    padding-bottom: var(--body-bottom-padding);
}

* {
    box-sizing: border-box;
}

.log {
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    padding: 10px;
    height: 200px;
    overflow-y: scroll;
    white-space: pre-wrap;
    display: none;
}

#settings-progress {
    display: none;
    border: 1px solid var(--sp-border);
    height: 14px;
    margin: 14px 0 18px;
    border-radius: var(--radius-pill);
    overflow: hidden;
    background: rgba(255, 255, 255, 0.7);
}

#settings-progress div {
    background: linear-gradient(90deg, var(--sp-forest), var(--sp-mist));
    height: 100%;
}

.log-entry {
    margin-bottom: 5px;
}

.log-entry.error {
    color: red;
}

#header-section,
.settings-section,
.commands-section,
.map-section {
    padding: 18px 16px;
}

.settings-section,
.commands-section,
.map-section {
    padding: 0 16px;
    margin-top: 8px;
    margin-bottom: 0;
}

#dfu-section {
    padding: 0 16px;
}

#composer-commands {
    padding-bottom: 60px;
}

.section-card {
    width: 100%;
    box-sizing: border-box;
}

.section-card + .section-card {
    margin-top: 12px;
}

.settings-section + .commands-section,
.commands-section + .map-section,
.settings-section + .map-section {
    margin-top: 12px;
}

.section-card-title {
    cursor: pointer;
    list-style: none;
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 0.3px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    color: var(--sp-forest-dark);
}

.section-card-title .icon {
    width: 16px;
    height: 16px;
    margin-right: 10px;
    flex: 0 0 auto;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

.dfu-card .section-card-title {
    cursor: default;
}

.dfu-card .section-card-title::after {
    display: none;
}

.section-card-title::-webkit-details-marker {
    display: none;
}

.section-card-title::after {
    content: '';
    width: 10px;
    height: 10px;
    border-right: 2px solid rgba(31, 42, 35, 0.7);
    border-bottom: 2px solid rgba(31, 42, 35, 0.7);
    margin-left: auto;
    transform: rotate(45deg);
    transition: transform 0.2s ease;
}

.section-card[open] .section-card-title::after {
    transform: rotate(225deg);
}

.section-card-body {
    padding-top: 12px;
}

.map-status {
    font-size: 14px;
    color: rgba(31, 42, 35, 0.7);
    margin-bottom: 10px;
}

.map-frame {
    position: relative;
    width: 100%;
    height: 280px;
    border-radius: 16px;
    overflow: hidden;
    background: rgba(233, 239, 233, 0.8);
    border: 1px solid rgba(0, 0, 0, 0.06);
    isolation: isolate;
}

.map-canvas {
    width: 100%;
    height: 100%;
}

.leaflet-container {
    z-index: 0;
}

.map-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 12px;
    background: rgba(236, 242, 237, 0.9);
    color: rgba(31, 42, 35, 0.8);
    font-weight: 600;
}

.page-section {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    box-sizing: border-box;
}

.controls button {
    margin-bottom: 10px;
    margin-right: 10px;
}

.header-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 12px;
}

.header-select {
    min-width: 220px;
    flex: 1 1 280px;
}

.primary-actions {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    align-items: stretch;
    gap: 10px;
    margin-bottom: 0;
}

.primary-actions .button,
.primary-actions button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.2px;
    width: 100%;
    height: 56px;
    padding: 0 18px;
    line-height: 1.2;
}

.composer-button {
    min-width: 0;
}

.composer-actions {
    margin-top: 0;
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: 10px;
}

.composer-actions .button,
.composer-actions button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.2px;
    width: 100%;
    height: 56px;
    padding: 0 18px;
    line-height: 1.2;
}

.scan-button {
    background: linear-gradient(145deg, #1f6feb, #1952b8);
    color: #fff;
    border: 1px solid transparent;
    box-shadow: 0 8px 16px rgba(25, 82, 184, 0.25);
    min-width: 0;
}

.scan-button:hover {
    background: linear-gradient(145deg, #2f7ef0, #184a9b);
}

.scan-settings-card {
    margin-top: 3px;
}

.scan-card .section-card-body {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.scan-card .section-card-title::after,
.composer-card .section-card-title::after {
    display: none;
}

.scan-settings-card .section-card-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: stretch;
}

.scan-settings-label {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
    color: rgba(31, 42, 35, 0.7);
    font-size: 13px;
    width: 100%;
}

.scan-settings-label input {
    width: 100%;
}

.scan-settings-label.pin-row .pincode {
    width: 100%;
    max-width: none;
}

.scan-settings-card #pin-label {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
    padding: 0;
    border: 0;
    border-radius: 0;
    background: transparent;
}


.pin-details {
    margin-top: 4px;
    color: rgba(31, 42, 35, 0.7);
    font-size: 13px;
}

.scan-filter-details {
    margin-top: 8px;
    color: rgba(31, 42, 35, 0.7);
    font-size: 13px;
}

.pin-details summary {
    cursor: pointer;
    list-style: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: var(--radius-sm);
    border: 1px solid rgba(31, 42, 35, 0.15);
    background: rgba(255, 255, 255, 0.8);
}

.scan-filter-details summary {
    cursor: pointer;
    list-style: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: var(--radius-sm);
    border: 1px solid rgba(31, 42, 35, 0.15);
    background: rgba(255, 255, 255, 0.8);
}

.pin-details summary::-webkit-details-marker {
    display: none;
}

.scan-filter-details summary::-webkit-details-marker {
    display: none;
}

.pin-details summary::after {
    content: "";
    width: 6px;
    height: 6px;
    border-right: 2px solid rgba(31, 42, 35, 0.6);
    border-bottom: 2px solid rgba(31, 42, 35, 0.6);
    transform: rotate(45deg);
    transition: transform 0.2s ease;
    margin-left: 4px;
}

.scan-filter-details summary::after {
    content: "";
    width: 6px;
    height: 6px;
    border-right: 2px solid rgba(31, 42, 35, 0.6);
    border-bottom: 2px solid rgba(31, 42, 35, 0.6);
    transform: rotate(45deg);
    transition: transform 0.2s ease;
    margin-left: 4px;
}

.pin-details[open] summary::after {
    transform: rotate(-135deg);
}

.scan-filter-details[open] summary::after {
    transform: rotate(-135deg);
}

.pin-details label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: 8px;
}

.scan-filter-details label {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
    margin-top: 8px;
}

.scan-filter-input {
    width: min(420px, 100%);
    height: 38px;
    padding: 0 10px;
    border-radius: var(--radius-sm);
    border: 1px solid rgba(31, 42, 35, 0.2);
    background: rgba(255, 255, 255, 0.95);
}

.scan-filter-input:focus {
    outline: none;
    border-color: rgba(31, 111, 235, 0.6);
    box-shadow: 0 0 0 3px rgba(31, 111, 235, 0.15);
}

.button-cluster {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px 10px;
}

.section-action {
    width: 100%;
    margin-bottom: 10px;
}

.button-cluster .hidden-when-no-settings {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px 10px;
}

.setting {
    opacity: 1;
    padding: 14px;
    word-wrap: break-word;
    border: 1px solid var(--sp-border);
    border-radius: var(--radius-lg);
    background-color: #fff;
    display: flex;
    flex-direction: column;
    box-shadow: var(--sp-shadow);
    position: relative;
}

.input-error {
    color: red;
    font-size: 90%;
    font-weight: bold;
    padding-top: 3px;
}

.setting-help {
    margin: 6px 0 0;
    font-size: 12px;
    color: rgba(31, 42, 35, 0.7);
    line-height: 1.4;
}

.setting.with-controls {
    justify-content: space-between;
}

.setting.with-controls .input-container {
    flex-grow: 1;
}

.setting.value-not-default {
    background: linear-gradient(135deg, rgba(160, 191, 195, 0.35), rgba(255, 255, 255, 0.9));
    border-color: rgba(160, 191, 195, 0.6);
}

.setting.disabled {
    cursor: wait;
    opacity: 0.6;
}

.setting.disabled * {
    pointer-events: none;
}

.setting button {
    margin-top: 5px;
}

.setting.transparent {
    opacity: 0.6;
}

.setting h4 {
    padding: 0;
    margin: 0;
    font-size: 15px;
    letter-spacing: 0.2px;
    word-break: break-all;
}

.setting h4 small {
    font-weight: normal;
}

.input-label {
    display: block;
    font-size: 11px;
    color: rgba(31, 42, 35, 0.75);
    letter-spacing: 0.2px;
    margin-bottom: 2px;
}

.input-helper {
    margin-top: 4px;
    font-size: 11px;
    color: rgba(31, 42, 35, 0.65);
}

.command-helper-label {
    font-size: 11px;
    color: rgba(31, 42, 35, 0.75);
    letter-spacing: 0.2px;
}

.command-helper-input {
    width: 100%;
}

.raw-value-label {
    display: block;
    margin-top: 6px;
    font-size: 11px;
    color: rgba(31, 42, 35, 0.65);
    letter-spacing: 0.2px;
}

.raw-value {
    margin-top: 2px;
    background: #e6ece9;
    border-color: #c7d2cc;
    color: rgba(31, 42, 35, 0.8);
}

.raw-value:read-only {
    cursor: not-allowed;
}

input,
select,
textarea {
    font-family: "SFMono-Regular", "Consolas", "Liberation Mono", "Menlo", monospace;
}

input,
select,
textarea,
button {
    font-size: 14px;
}

.setting .input-container input,
.setting .input-container select,
.setting .input-container textarea {
    width: 100%;
    display: block;
    margin-top: 6px;
    background: #fff;
    border: 1px solid rgba(31, 42, 35, 0.15);
    border-radius: var(--radius-sm);
    padding: 9px 10px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.setting .input-container input:focus,
.setting .input-container select:focus,
.setting .input-container textarea:focus,
#settings-search:focus,
#settings-dropdown:focus,
#hex-output:focus {
    outline: none;
    border-color: var(--sp-forest);
    box-shadow: 0 0 0 3px rgba(82, 115, 94, 0.18);
}

.setting .input-container .checkbox-container input {
    width: auto;
}

.byte-array-grid {
    display: grid;
    gap: 8px;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
}

.byte-array-field label {
    display: block;
    font-size: 12px;
    margin-top: 4px;
    color: rgba(31, 42, 35, 0.7);
}

.byte-array-help {
    color: rgba(31, 42, 35, 0.65);
    font-size: 11px;
    margin-top: 2px;
}

#commands-buttons-section {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
}

.command {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.command-helper-label {
    font-size: 11px;
    color: rgba(31, 42, 35, 0.75);
    letter-spacing: 0.2px;
}

.command-helper-input {
    width: 100%;
}

.command-meta {
    color: rgba(31, 42, 35, 0.65);
    font-size: 11px;
    letter-spacing: 0.2px;
    word-break: break-all;
}

#commands-section {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
}

#commands-buttons-section button {
    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

.settings-container {
    display: grid;
    gap: 10px;
    margin-top: 10px;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
}

button,
.button {
    background: linear-gradient(145deg, var(--sp-forest), var(--sp-forest-dark));
    border: 1px solid transparent;
    color: #fff;
    padding: 10px 18px;
    cursor: pointer;
    text-decoration: none;
    text-align: center;
    align-content: center;
    border-radius: var(--radius-pill);
    letter-spacing: 0.2px;
    transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease, border-color 0.2s ease;
    box-shadow: 0 6px 14px rgba(44, 73, 58, 0.22);
}

button:hover,
.button:hover {
    background: linear-gradient(145deg, #5d826a, #3b5a48);
    transform: translateY(-1px);
}

button:active,
.button:active {
    transform: translateY(0);
    box-shadow: 0 3px 8px rgba(44, 73, 58, 0.2);
}

button:disabled,
button:disabled:hover {
    background: #6e7d75;
    border-color: #6e7d75;
    box-shadow: none;
    transform: none;
    cursor: not-allowed;
}

button.secondary,
.button.secondary {
    background: #fff;
    color: var(--sp-forest);
    border: 1px solid rgba(82, 115, 94, 0.5);
    box-shadow: none;
}

button.secondary:hover,
.button.secondary:hover {
    background: rgba(144, 174, 155, 0.18);
    border-color: var(--sp-forest);
}

#disconnect-button {
    background: linear-gradient(145deg, #d64545, #b91c1c);
    border-color: transparent;
    box-shadow: 0 6px 14px rgba(185, 28, 28, 0.25);
}

#disconnect-button:hover {
    background: linear-gradient(145deg, #e35d5d, #a51616);
}

#hex-output.invalid {
    border: 2px solid red;
}

#container {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    margin-top: 10px;
}

.section {
    padding: 16px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: var(--radius-lg);
    border: 1px solid rgba(82, 115, 94, 0.2);
    box-shadow: var(--sp-shadow);
}

body.connected #commands-section {
    margin-bottom: 150px;
}

.section-card .section-card-body #commands-section {
    margin-bottom: 0;
}

.settings-group {
    margin-bottom: 16px;
}

.group-toggle {
    width: 100%;
    text-align: left;
    border-radius: var(--radius-md);
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(82, 115, 94, 0.25);
    padding: 10px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    color: var(--sp-forest-dark);
    box-shadow: 0 6px 14px rgba(31, 42, 35, 0.08);
}

.group-toggle:hover {
    background: rgba(255, 255, 255, 0.95);
    transform: none;
}

.group-title {
    font-size: 14px;
    letter-spacing: 0.3px;
    text-transform: capitalize;
}

.group-caret {
    width: 8px;
    height: 8px;
    border-right: 2px solid var(--sp-forest);
    border-bottom: 2px solid var(--sp-forest);
    transform: rotate(45deg);
    transition: transform 0.2s ease;
}

.settings-group.is-collapsed .group-caret {
    transform: rotate(-45deg);
}

.settings-group.is-collapsed .settings-container {
    display: none;
}

.section h4 {
    margin: 0 0 6px 0;
}

h2 {
    margin: 6px 0 10px;
    font-size: 20px;
    letter-spacing: 0.3px;
}

.brand {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 6px 0 14px;
}

.brand-logo {
    width: 54px;
    height: 54px;
    object-fit: contain;
    border-radius: var(--radius-md);
    background: #fff;
    border: 1px solid rgba(82, 115, 94, 0.2);
    box-shadow: 0 8px 16px rgba(31, 42, 35, 0.15);
    padding: 6px;
}

.brand-title {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.brand-name {
    font-size: 18px;
    font-weight: 700;
    letter-spacing: 0.4px;
    color: var(--sp-forest-dark);
}

.brand-subtitle {
    font-size: 13px;
    letter-spacing: 0.3px;
    color: rgba(31, 42, 35, 0.7);
}

/* Floating bar at the bottom */
#floating-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: var(--sp-forest);
    color: white;
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    font-family: monospace;
    z-index: 20;
}

.checkbox-container {
    display: flex;
    align-items: center;
}

.checkbox-container label {
    margin-left: 5px;
    cursor: pointer;
}

#payload-type {
    height: 40px;
    padding: 0 10px;
    border-radius: var(--radius-sm);
    border: 1px solid rgba(31, 42, 35, 0.2);
    background: #fff;
    color: #000;
    font-family: monospace;
}

#hex-output {
    width: 70%;
    height: 40px;
    padding: 0 10px;
    font-family: monospace;
    border: 1px solid rgba(31, 42, 35, 0.2);
    border-radius: var(--radius-sm);
    background: #fff;
    color: #000;
}

#copy-button {
    background: linear-gradient(145deg, #1f6feb, #1952b8);
    color: #fff;
    border: 1px solid transparent;
    box-shadow: 0 8px 16px rgba(25, 82, 184, 0.25);
    cursor: pointer;
    width: clamp(36px, 7vw, 44px);
    height: clamp(36px, 7vw, 44px);
    min-width: 36px;
    min-height: 36px;
    padding: 0;
    border-radius: var(--radius-md);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

#copy-button .payload-icon {
    width: 1em;
    height: 1em;
    display: block;
    fill: currentColor;
}

#copy-button:hover {
    background-color: rgba(144, 174, 155, 0.2);
}

/* Scrollable container for port checkboxes (for lr_send_flag, etc.) */
.checkbox-scroll {
    max-height: 150px;
    overflow-y: auto;
    border: 1px solid rgba(31, 42, 35, 0.15);
    padding: 8px;
    border-radius: var(--radius-sm);
    margin-top: 5px;
    background: #fafafa;
}

.data-item {
    display: flex;
    justify-content: space-between;
    padding: 5px 0;
    border-bottom: 1px solid rgba(31, 42, 35, 0.12);
}

.data-item:last-child {
    border-bottom: none;
}

.status-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.status-header .status-item {
    margin-right: 0;
}

.status-items {
    display: flex;
    flex-wrap: wrap;
}

.status-item {
    display: flex;
    align-items: center;
    margin: 4px 10px 4px 0;
    padding: 6px 10px;
    background: rgba(144, 174, 155, 0.18);
    border-radius: var(--radius-pill);
    font-size: 13px;
}

.status-item .icon {
    margin-right: 5px;
}

.lr-update-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    margin: 10px 0 12px;
    padding: 12px 14px;
    border-radius: 16px;
    background: rgba(255, 196, 112, 0.25);
    border: 1px solid rgba(197, 121, 0, 0.35);
}

.lr-update-title {
    font-weight: 700;
    font-size: 14px;
}

.lr-update-text {
    font-size: 13px;
    color: rgba(31, 42, 35, 0.85);
}

.lr-update-actions {
    display: flex;
    gap: 10px;
    align-items: center;
}

.interval-container,
.setting-controls,
#main-commands {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(2, minmax(0, 1fr));
}

.interval-unit-label {
    align-self: center;
    color: rgba(31, 42, 35, 0.75);
    font-size: 13px;
    padding: 8px 10px;
    border: 1px solid rgba(31, 42, 35, 0.2);
    border-radius: 8px;
    background: rgba(31, 42, 35, 0.06);
}

.hidden,
body:not(.connected) .hidden-when-disconnected,
body.connected .hidden-when-connected,
body:not(.has-settings) .hidden-when-no-settings,
body:not(.has-status) .hidden-when-no-status {
    display: none !important;
}

body.lr-update #settings-selection,
body.lr-update .settings-section,
body.lr-update .commands-section,
body.lr-update .map-section,
body.lr-update .lr-update-hide,
body.lr-update .button-cluster .hidden-when-no-settings {
    display: none !important;
}

.dfu-header-actions {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px 10px;
}

#dfu-back-top {
    display: none;
}

.dfu-only {
    display: none !important;
}

body.dfu-active .dfu-only {
    display: inline-flex !important;
}

body.dfu-active .dfu-hide {
    display: none !important;
}

body.dfu-active .hidden-when-connected {
    display: none !important;
}

body.dfu-active .hidden-when-disconnected.dfu-keep-visible {
    display: block !important;
}

body.dfu-active .bottom-nav.dfu-keep-visible {
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    justify-items: center;
}

body.dfu-active .bottom-nav .dfu-hide-nav {
    display: none !important;
}

body.dfu-active .bottom-nav .dfu-only-nav {
    display: inline-flex !important;
}

#dfu-section .section-card + .section-card {
    margin-top: 12px;
}

.dfu-connection-status {
    margin-top: 10px;
    font-size: 13px;
    color: rgba(31, 42, 35, 0.75);
}

.dfu-connection-status.success {
    color: #1e7b3a;
    font-weight: 600;
}

.dfu-connection-status.error {
    color: #b42318;
    font-weight: 600;
}

.dfu-device-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 14px 18px;
}

.dfu-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    color: rgba(31, 42, 35, 0.55);
}

.dfu-value {
    font-size: 15px;
    font-weight: 600;
    color: #1f2a23;
}

.dfu-warning {
    margin-top: 14px;
    padding: 12px 14px;
    border-radius: 12px;
    background: rgba(255, 209, 102, 0.2);
    color: #8a5800;
    font-size: 13px;
}

.dfu-file-input {
    width: 100%;
    margin-bottom: 10px;
}

.dfu-file-status {
    font-size: 13px;
    margin-bottom: 8px;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-check-status {
    font-size: 14px;
    margin-bottom: 14px;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-file-match {
    font-size: 13px;
    margin-bottom: 12px;
    padding: 8px 10px;
    border-radius: 10px;
    background: rgba(31, 42, 35, 0.06);
    color: rgba(31, 42, 35, 0.8);
}

.dfu-file-match.success {
    background: rgba(30, 123, 58, 0.12);
    color: #1e7b3a;
    font-weight: 600;
}

.dfu-file-match.warning {
    background: rgba(255, 209, 102, 0.2);
    color: #8a5800;
    font-weight: 600;
}

.dfu-file-match.error {
    background: rgba(180, 35, 24, 0.12);
    color: #b42318;
    font-weight: 600;
}

.dfu-confirmation {
    margin-top: 8px;
    padding: 12px;
    border-radius: 12px;
    background: rgba(31, 42, 35, 0.04);
    border: 1px solid rgba(31, 42, 35, 0.12);
    display: grid;
    gap: 10px;
}

.dfu-confirmation-text {
    font-size: 13px;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-confirmation-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.dfu-check-status.success {
    color: #1e7b3a;
    font-weight: 600;
}

.dfu-check-status.warning {
    color: #8a5800;
    font-weight: 600;
}

.dfu-check-status.danger {
    color: #b42318;
    font-weight: 700;
}

.dfu-check-status.error {
    color: #b42318;
    font-weight: 600;
}

.dfu-upload-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 12px;
}

.dfu-upload-settings {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    margin-bottom: 12px;
}

.dfu-upload-setting {
    display: grid;
    gap: 6px;
    font-size: 12px;
    color: rgba(31, 42, 35, 0.7);
}

.dfu-upload-setting input {
    padding: 8px 10px;
    border-radius: 8px;
    border: 1px solid rgba(31, 42, 35, 0.2);
    font-size: 14px;
}

.dfu-upload-status {
    margin-bottom: 16px;
    padding: 12px 14px;
    border-radius: 12px;
    background: rgba(31, 42, 35, 0.06);
}

.dfu-upload-status-title {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 8px;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-upload-status-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 6px;
}

.dfu-upload-status-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.7);
    font-size: 12px;
    color: rgba(31, 42, 35, 0.75);
}

.dfu-upload-status-list li.active {
    color: #1f6feb;
    font-weight: 600;
}

.dfu-upload-status-list li.completed {
    color: #1e7b3a;
    font-weight: 600;
}

.dfu-upload-status-list li.error {
    color: #b42318;
    font-weight: 600;
}

.dfu-upload-status-list li.warning {
    color: #8a5800;
    font-weight: 600;
}

.dfu-upload-status-list li.danger {
    color: #b42318;
    font-weight: 700;
}

.dfu-upload-status-list .status-detail {
    font-variant-numeric: tabular-nums;
    color: rgba(31, 42, 35, 0.6);
}

.dfu-advanced-card {
    margin-top: 10px;
}

.dfu-advanced-card .section-card-title {
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 0.3px;
}

.dfu-advanced-card .section-card-title::after {
    display: inline-block;
}


.dfu-image-state {
    margin-top: 12px;
    padding: 12px 14px;
    border-radius: 12px;
    background: rgba(31, 42, 35, 0.04);
}

.dfu-image-state-title {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 8px;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-image-state-list {
    display: grid;
    gap: 10px;
}

.dfu-image-slot {
    border-radius: 10px;
    padding: 10px;
    background: #fff;
    border: 1px solid rgba(31, 42, 35, 0.12);
}

.dfu-image-slot.active {
    border-color: rgba(30, 123, 58, 0.5);
    box-shadow: 0 0 0 1px rgba(30, 123, 58, 0.15);
}

.dfu-image-slot-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: 600;
    color: rgba(31, 42, 35, 0.8);
}

.dfu-image-slot-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 6px 10px;
    font-size: 12px;
    color: rgba(31, 42, 35, 0.7);
}

.dfu-image-slot-grid span {
    font-weight: 600;
    color: rgba(31, 42, 35, 0.9);
}

.dfu-image-state-empty {
    font-size: 12px;
    color: rgba(31, 42, 35, 0.6);
}

.dfu-waiting-overlay {
    position: fixed;
    inset: 0;
    z-index: 1200;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    background: rgba(15, 24, 19, 0.45);
    backdrop-filter: blur(2px);
}

.dfu-waiting-card {
    display: grid;
    justify-items: center;
    gap: 16px;
    width: min(480px, 90vw);
    padding: 28px 32px;
    border-radius: 16px;
    background: #fff;
    color: rgba(31, 42, 35, 0.9);
    font-size: 16px;
    font-weight: 600;
    box-shadow: 0 20px 40px rgba(17, 28, 22, 0.25);
    text-align: center;
}

.dfu-waiting-countdown {
    font-size: 13px;
    color: rgba(31, 42, 35, 0.7);
}

.dfu-spinner {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 4px solid rgba(31, 42, 35, 0.2);
    border-top-color: #1f6feb;
    animation: dfu-spin 1s linear infinite;
}

@keyframes dfu-spin {
    to {
        transform: rotate(360deg);
    }
}

.dfu-progress {
    width: 100%;
    height: 12px;
    border-radius: 999px;
    background: rgba(31, 42, 35, 0.12);
    overflow: hidden;
}

.dfu-progress-bar {
    height: 100%;
    width: 0%;
    border-radius: inherit;
    background: linear-gradient(90deg, #1f6feb, #00b894);
    transition: width 0.2s ease;
}

.dfu-progress-text {
    margin-top: 8px;
    font-size: 13px;
    color: rgba(31, 42, 35, 0.8);
}

.import-preview-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 24, 19, 0.5);
    display: grid;
    place-items: center;
    padding: 24px 16px;
    z-index: 1000;
}

.import-preview-dialog {
    width: min(960px, 100%);
    max-height: 88vh;
    background: #fff;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(82, 115, 94, 0.25);
    box-shadow: var(--sp-shadow);
    display: grid;
    grid-template-rows: auto minmax(0, 1fr) auto;
    overflow: hidden;
}

.import-preview-header {
    padding: 18px 20px 12px;
    border-bottom: 1px solid rgba(82, 115, 94, 0.18);
    background: rgba(245, 247, 243, 0.85);
}

.import-preview-header h3 {
    margin: 0 0 4px;
    font-size: 18px;
}

.import-preview-header p {
    margin: 0;
    color: rgba(31, 42, 35, 0.7);
    font-size: 13px;
}

.import-preview-body {
    padding: 14px 20px 6px;
    overflow: auto;
}

.import-preview-toggle {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: rgba(31, 42, 35, 0.7);
    margin-bottom: 10px;
}

.import-preview-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

.import-preview-table th,
.import-preview-table td {
    padding: 10px 8px;
    border-bottom: 1px solid rgba(82, 115, 94, 0.18);
    vertical-align: top;
    text-align: left;
    word-break: break-word;
    overflow-wrap: anywhere;
}

.import-preview-table th {
    font-size: 12px;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    color: rgba(31, 42, 35, 0.7);
}

.import-preview-setting {
    font-weight: 600;
    margin-bottom: 2px;
}

.import-preview-meta {
    font-size: 12px;
    color: rgba(31, 42, 35, 0.6);
    word-break: break-word;
    overflow-wrap: anywhere;
}

.import-preview-desc {
    font-size: 12px;
    margin-top: 6px;
    color: rgba(31, 42, 35, 0.65);
    word-break: break-word;
    overflow-wrap: anywhere;
}

.import-preview-list {
    margin: 0;
    padding-left: 18px;
    color: rgba(31, 42, 35, 0.85);
}

.import-preview-list li {
    margin-bottom: 4px;
}

.import-preview-value {
    display: grid;
    gap: 4px;
}

.import-preview-subvalue {
    font-size: 12px;
    color: rgba(31, 42, 35, 0.55);
}

.import-preview-muted {
    color: rgba(31, 42, 35, 0.6);
}

.import-preview-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.import-preview-tags span {
    background: rgba(144, 174, 155, 0.22);
    border-radius: var(--radius-pill);
    padding: 4px 8px;
    font-size: 12px;
}

.import-preview-tags .import-preview-tag-added {
    background: rgba(45, 106, 79, 0.22);
    color: #1f4f3b;
}

.import-preview-tags .import-preview-tag-removed {
    background: rgba(155, 75, 63, 0.2);
    color: #6b2f25;
    text-decoration: line-through;
}

.import-preview-checkboxes {
    display: grid;
    gap: 6px 12px;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.import-preview-checkbox {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: rgba(31, 42, 35, 0.85);
    min-width: 0;
}

.import-preview-checkbox input {
    margin: 0;
    flex: 0 0 auto;
}

.import-preview-checkbox label {
    min-width: 0;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.import-preview-checkbox.import-preview-tag-added label {
    color: #1f4f3b;
    font-weight: 600;
}

.import-preview-checkbox.import-preview-tag-removed label {
    color: #6b2f25;
    text-decoration: line-through;
}

.import-preview-mono {
    font-family: "SFMono-Regular", "Consolas", "Liberation Mono", "Menlo", monospace;
    font-size: 12px;
}

.import-preview-empty {
    color: rgba(31, 42, 35, 0.55);
}

.import-preview-bool {
    font-weight: 600;
    text-transform: lowercase;
}

.import-preview-bool-true {
    color: #2d6a4f;
}

.import-preview-bool-false {
    color: #9b4b3f;
}

.import-preview-footer {
    padding: 14px 20px 18px;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    border-top: 1px solid rgba(82, 115, 94, 0.18);
    background: rgba(245, 247, 243, 0.85);
}

.import-preview-unchanged {
    background: rgba(144, 174, 155, 0.08);
}

.import-preview-cell-unchanged {
    color: rgba(31, 42, 35, 0.65);
}

.import-preview-unchanged-tag {
    display: inline-flex;
    margin-top: 6px;
    padding: 3px 8px;
    border-radius: var(--radius-pill);
    background: rgba(144, 174, 155, 0.18);
    font-size: 11px;
    letter-spacing: 0.2px;
    text-transform: uppercase;
    color: rgba(31, 42, 35, 0.6);
}

#main-commands button {
    margin: 0;
}

.icon {
    width: 16px;
    height: 16px;
    display: inline-block;
    background-repeat: no-repeat;
    background-position: center center;
    background-size: contain;
}

.icon.ble-scan {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><g transform="translate(32 0)"><path d="M292.6 171.1L249.7 214l-.3-86 43.2 43.1m-43.2 219.8l43.1-43.1-42.9-42.9-.2 86zM416 259.4C416 465 344.1 512 230.9 512S32 465 32 259.4 115.4 0 228.6 0 416 53.9 416 259.4zm-158.5 0l79.4-88.6L211.8 36.5v176.9L138 139.6l-27 26.9 92.7 93-92.7 93 26.9 26.9 73.8-73.8 2.3 170 127.4-127.5-83.9-88.7z"/></g></svg>');
}

.icon.hw-version {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"/></svg>');
}

.icon.fw-version {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>');
}

.icon.uptime {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M176 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l16 0 0 34.4C92.3 113.8 16 200 16 304c0 114.9 93.1 208 208 208s208-93.1 208-208c0-41.8-12.3-80.7-33.5-113.2l24.1-24.1c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L355.7 143c-28.1-23-62.2-38.8-99.7-44.6L256 64l16 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L224 0 176 0zm72 192l0 128c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-128c0-13.3 10.7-24 24-24s24 10.7 24 24z"/></svg>');
}

.icon.temperature {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M160 64c-26.5 0-48 21.5-48 48l0 164.5c0 17.3-7.1 31.9-15.3 42.5C86.2 332.6 80 349.5 80 368c0 44.2 35.8 80 80 80s80-35.8 80-80c0-18.5-6.2-35.4-16.7-48.9c-8.2-10.6-15.3-25.2-15.3-42.5L208 112c0-26.5-21.5-48-48-48zM48 112C48 50.2 98.1 0 160 0s112 50.1 112 112l0 164.4c0 .1 .1 .3 .2 .6c.2 .6 .8 1.6 1.7 2.8c18.9 24.4 30.1 55 30.1 88.1c0 79.5-64.5 144-144 144S16 447.5 16 368c0-33.2 11.2-63.8 30.1-88.1c.9-1.2 1.5-2.2 1.7-2.8c.1-.3 .2-.5 .2-.6L48 112zM208 368c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-20.9 13.4-38.7 32-45.3L144 144c0-8.8 7.2-16 16-16s16 7.2 16 16l0 178.7c18.6 6.6 32 24.4 32 45.3z"/></svg>');
}

.icon.hw-type {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>');
}

.icon.messages {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16l0 22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1l0-22.1c0-8.8-7.2-16-16-16L64 112zM48 212.2L48 384c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-171.8L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128z"/></svg>');
}

.icon.battery {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M464 160c8.8 0 16 7.2 16 16l0 160c0 8.8-7.2 16-16 16L80 352c-8.8 0-16-7.2-16-16l0-160c0-8.8 7.2-16 16-16l384 0zM80 96C35.8 96 0 131.8 0 176L0 336c0 44.2 35.8 80 80 80l384 0c44.2 0 80-35.8 80-80l0-16c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l0-16c0-44.2-35.8-80-80-80L80 96zm368 96L96 192l0 128 352 0 0-128z"/></svg>');
}

.icon.charging {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288l111.5 0L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7l-111.5 0L349.4 44.6z"/></svg>');
}

.icon.accelerometer {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M278.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l9.4-9.4L224 224l-114.7 0 9.4-9.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-64 64c-12.5 12.5-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-9.4-9.4L224 288l0 114.7-9.4-9.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-9.4 9.4L288 288l114.7 0-9.4 9.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l9.4 9.4L288 224l0-114.7 9.4 9.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-64-64z"/></svg>');
}

.icon.locked {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"/></svg>');
}

.icon.errors {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c-9.4 9.4-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0z"/></svg>');
}

.icon.reset {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 224c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"/></svg>');
}

.icon.refresh {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"/></svg>');
}

.icon.close {
    background-image: url('data:image/svg+xml;utf8,<svg fill="white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>');
}

.icon.toggle-log {
    background-image: url('data:image/svg+xml;utf8,<svg fill="white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 0c53 0 96 43 96 96l0 3.6c0 15.7-12.7 28.4-28.4 28.4l-135.1 0c-15.7 0-28.4-12.7-28.4-28.4l0-3.6c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4l112 0c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5l64.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6L272 240c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 239.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64.3 0c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"/></svg>');
}

.icon.ublox-time {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/></svg>');
}

.icon.ublox-location {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>');
}

.icon.square-poll-horizontal {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><rect x=\"32\" y=\"32\" width=\"448\" height=\"448\" rx=\"48\" ry=\"48\" fill=\"none\" stroke=\"black\" stroke-width=\"32\"/><rect x=\"128\" y=\"160\" width=\"256\" height=\"48\" rx=\"8\" fill=\"black\"/><rect x=\"128\" y=\"240\" width=\"192\" height=\"48\" rx=\"8\" fill=\"black\"/><rect x=\"128\" y=\"320\" width=\"144\" height=\"48\" rx=\"8\" fill=\"black\"/></svg>');
}

.icon.square-caret-up {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><rect x=\"32\" y=\"32\" width=\"384\" height=\"448\" rx=\"48\" ry=\"48\" fill=\"none\" stroke=\"black\" stroke-width=\"32\"/><path d=\"M224 168L112 280h224L224 168z\" fill=\"black\"/></svg>');
}

.icon.house {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M288 0L0 240h48v240h176V336h128v144h176V240h48L288 0z\" fill=\"black\"/></svg>');
}

.log-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(90deg, rgba(31, 42, 35, 0.98), rgba(52, 71, 58, 0.98));
    color: white;
    transition: transform 0.3s ease;
    transform: translateY(100%);
    z-index: 1301;
}

.log-footer.open {
    transform: translateY(0);
}

.log-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background-color: rgba(255, 255, 255, 0.08);
    cursor: pointer;
}

.log-content {
    height: 22vh;
    overflow-y: auto;
    padding: 12px 16px;
    font-family: monospace;
}

#toast {
    visibility: hidden;
    /* Hidden by default */
    max-width: 90%;
    min-width: 250px;
    width: auto;
    margin: 0 auto;
    background-color: rgba(31, 42, 35, 0.95);
    color: #fff;
    text-align: center;
    border-radius: var(--radius-sm);
    padding: 15px;
    position: fixed;
    z-index: 100;
    left: 50%;
    transform: translateX(-50%);
    bottom: 30px;
    font-size: 16px;
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.search {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    flex-direction: row;
    gap: 10px 16px;
    margin: 6px 0 14px;
}

/* Style the search bar */
#settings-search {
    width: 100%;
    padding: 10px 14px;
    font-size: 16px;
    border: 1px solid rgba(31, 42, 35, 0.18);
    border-radius: var(--radius-pill);
    background: #fff;
    box-shadow: 0 2px 10px rgba(31, 42, 35, 0.08);
}

/* Adjust layout for smaller screens */
@media (max-width: 600px) {
    #settings-search {
        flex-grow: 1;
    }
}

#settings-dropdown {
    width: 100%;
    padding: 10px 12px;
    border-radius: var(--radius-lg);
    border: 1px solid rgba(31, 42, 35, 0.18);
    background: #fff;
}

input,
select,
textarea {
    border-radius: var(--radius-lg);
}

#pin-label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: var(--radius-pill);
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(31, 42, 35, 0.15);
}

.pincode {
    width: 120px;
    text-align: left;
    background: #fff;
    border: 1px solid rgba(31, 42, 35, 0.15);
    border-radius: var(--radius-sm);
    padding: 9px 10px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.pincode:focus {
    outline: none;
    border-color: var(--sp-forest);
    box-shadow: 0 0 0 3px rgba(82, 115, 94, 0.18);
}

.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
    gap: 6px;
    padding: 10px 12px 14px;
    background: linear-gradient(0deg, rgba(31, 42, 35, 0.98), rgba(31, 42, 35, 0.92));
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 1000;
}

.bottom-nav a,
.bottom-nav button {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.12);
    color: #fff;
    padding: 10px 6px;
    border-radius: var(--radius-md);
    text-decoration: none;
    font-size: 12px;
    text-align: center;
    cursor: pointer;
    box-shadow: none;
    text-transform: none;
    letter-spacing: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.bottom-nav .nav-logo {
    display: none;
    align-items: center;
    justify-content: center;
    padding: 8px;
}

.bottom-nav .nav-logo img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    filter: drop-shadow(0 6px 10px rgba(0, 0, 0, 0.2));
}

.bottom-nav a:hover,
.bottom-nav button:hover {
    background: rgba(255, 255, 255, 0.18);
    transform: none;
}

.bottom-nav a:active,
.bottom-nav button:active {
    transform: translateY(1px);
}

.bottom-nav .icon {
    width: 20px;
    height: 20px;
    background-size: 20px 20px;
    filter: invert(1);
    opacity: 0.95;
}

.bottom-nav .icon.toggle-log {
    filter: none;
}

.bottom-nav.nav-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
}

@media (min-width: 901px) {
    :root {
        --body-bottom-padding: 40px;
    }

    .bottom-nav {
        top: 50%;
        bottom: auto;
        left: auto;
        right: 16px;
        transform: translateY(-50%);
        grid-template-columns: 1fr;
        gap: 8px;
        padding: 10px;
        border-radius: var(--radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: linear-gradient(180deg, rgba(31, 42, 35, 0.98), rgba(31, 42, 35, 0.92));
        box-shadow: 0 16px 30px rgba(17, 28, 22, 0.28);
    }

    .bottom-nav .nav-logo {
        display: flex;
        background: rgba(255, 255, 255, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .bottom-nav .nav-logo img {
        width: 34px;
        height: 34px;
    }

    .bottom-nav a,
    .bottom-nav button {
        border-radius: var(--radius-md);
        padding: 10px 8px;
        font-size: 11px;
        letter-spacing: 0;
    }

    .bottom-nav.nav-4 {
        grid-template-columns: 1fr;
    }

    body.dfu-active .bottom-nav.dfu-keep-visible {
        grid-template-columns: 1fr;
        justify-items: stretch;
    }
}

@media (max-width: 900px) {
    .map-section {
        margin-bottom: 12px;
        padding-bottom: calc(var(--body-bottom-padding) + 8px);
    }
}

@media (max-width: 900px) {
    :root {
        --body-bottom-padding: 88px;
        --bottom-nav-offset: 64px;
    }

    #floating-bar {
        bottom: var(--bottom-nav-offset);
    }

    #container,
    #commands-section,
    .settings-container {
        grid-template-columns: 1fr;
    }

    #main-commands,
    .setting-controls,
    .interval-container {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 600px) {
    .status-item {
        font-size: 12px;
    }

    h2 {
        font-size: 18px;
    }

    .brand {
        gap: 10px;
    }

    .brand-logo {
        width: 46px;
        height: 46px;
        border-radius: var(--radius-md);
    }
}
